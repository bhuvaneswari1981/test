- name: deployFPPSBackend | Inspect {{ deployment_filename }}
      shell: |
        set -o pipefail
        unzip -l {{ archive_name.dest }} | grep fpps.war | wc -l
      register: unzip_content

    - name: deployFPPSBackend | Unarchive {{ deployment_filename }}
      unarchive:
        src: "{{ archive_name.dest }}"
        dest: "{{ tomcat_webapps }}"
        remote_src: true
      delegate_to: "{{ inventory_hostname }}"
      register: unarchive_file
      when: unzip_content.stdout | int == 1

- name: deployFPPSBackend | Copy {{ deployment_filename }} to {{ local_stage_path }}
       copy:
        src: "{{ archive_name.dest }}"
        dest: "{{ local_stage_path }}"
        remote_src: true
      delegate_to: "{{ inventory_hostname }}"
      register: war_contents
      when: unzip_content.stdout | int == 0
