for filename in yaml_files:
  full_path = ps.join([root_path, filename])
  logger.debug("try to open %s", full_path)
  with open(full_path, 'r') as vars_file:
    _vars = yaml.full_load(vars_file)

  if isinstance(_vars, dict):
    loaded_vars.update(_vars)
  else:
    # Use filename (without extension) as key
    key = os.path.splitext(filename)[0]
    loaded_vars[key] = _vars
