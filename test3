- name: Commit the artifact with descriptive message
  shell: |
    git add "{{ current_artifact }}"
    git commit -m "{{ commit_message }}" || echo "NO_CHANGES"
  args:
    chdir: "{{ destination_directory }}/{{ github_repo_name }}"
  register: commit_result
  changed_when: "'NO_CHANGES' not in commit_result.stdout"
  failed_when: false

- name: Log skipped commit
  debug:
    msg: "No changes to commit for {{ current_artifact }}"
  when: "'NO_CHANGES' in commit_result.stdout"
