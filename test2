
    - name: promoteBuildArtifact | Fail if any files are missing in develop
  ansible.builtin.fail:
    msg: "The following files are missing in develop branch: {{ missing_files | join(', ') }}"
  when: missing_files | length > 0
  vars:
    missing_files: >-
      {{
        check_files.results
        | selectattr('stdout', 'equalto', '')
        | map(attribute='item')
        | map('combine', {'path': item.artifact_folder ~ '/' ~ item.filename})
        | map(attribute='path')
        | list
      }}

