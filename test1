- name: promoteBuildArtifact | Remove existing directory
  ansible.builtin.file:
    path: "{{ destination_directory }}/{{ github_repo_name }}"
    state: absent

- name: promoteBuildArtifact | Clone repository
  ansible.builtin.git:
    repo: "{{ destination_repo }}"
    dest: "{{ destination_directory }}/{{ github_repo_name }}"
    version: develop  # Use a branch that definitely exists

- name: promoteBuildArtifact | Create target branch
  ansible.builtin.command: git checkout -b {{ target_branch }}
  args:
    chdir: "{{ destination_directory }}/{{ github_repo_name }}"
  changed_when: true
